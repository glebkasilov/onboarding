# üì° –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ ‚Äî API Gateway

## üìö –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî API Gateway, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —è–∑—ã–∫–µ **Go** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ **Gin**, –≤—ã—Å—Ç—É–ø–∞—é—â–∏–π –µ–¥–∏–Ω—ã–º –≤—Ö–æ–¥–æ–º –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –û–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∏—Ö –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (`jwt-go`, `admin`, `user`, `manager`, `leader`, `notification`) –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ —Å –ø–æ–º–æ—â—å—é middleware.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**:

```
                      +------------+
                      |   Client   |
                      +------------+
                            |
                            v
                    +----------------+
                    |  API Gateway   |
                    |   (port 8080)  |
                    +----------------+
                       /    |     |    \ 
                      /     |     |     \
                     v      v     v      v
                +--------+ +--------+ +----------+
                | jwt-go | | admin  | |  user    |
                | :8000  | | :3000  | | :8080    |
                +--------+ +--------+ +----------+
                          \        /
                           v      v
                       +------------+ +------------+
                       |  manager   | |  leader     |
                       |  :8082     | |  :8083      |
                       +------------+ +------------+
                                |
                                v
                         +--------------+
                         | notification |
                         |   :8084      |
                         +--------------+
```

---

## üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è     | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 |
|----------------|--------------------------------------------|
| Go + Gin       | API Gateway, —Ä–æ—É—Ç–∏–Ω–≥ –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ       |
| Docker         | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ –∏–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤        |
| JWT            | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π                |
| HTTP Proxy     | –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤                     |
| Middleware     | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –∞–¥–º–∏–Ω, –ª–∏–¥–µ—Ä  |
| PostgreSQL     | –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞ —É—Ä–æ–≤–Ω–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤)  |

---

## üìå –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`jwt-go:8000`)

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç                             | –û–ø–∏—Å–∞–Ω–∏–µ                         | –ó–∞—â–∏—Ç–∞             |
|-------|--------------------------------------|----------------------------------|---------------------|
| POST  | `/auth/signup`                       | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è         | ‚ùå                  |
| POST  | `/auth/login`                        | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É                   | ‚ùå                  |
| GET   | `/auth/validate`                     | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞                  | ‚úÖ (RequireAuth)    |
| PUT   | `/auth/admin/update-role/:id`        | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è     | ‚úÖ (Auth + Admin)   |

---

### üõ†Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (`admin:3000`)

> –î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (`RequireAdmin`)

#### –ö—É—Ä—Å—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç                  | –û–ø–∏—Å–∞–Ω–∏–µ              |
|-------|----------------------------|------------------------|
| POST  | `/admin/courses`           | –°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å           |
| GET   | `/admin/courses`           | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ–≤ |
| PUT   | `/admin/courses/:id`       | –û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å          |
| DELETE| `/admin/courses/:id`       | –£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å           |

#### –£—Ä–æ–∫–∏

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç                  | –û–ø–∏—Å–∞–Ω–∏–µ               |
|-------|----------------------------|-------------------------|
| POST  | `/admin/lessons`           | –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫            |
| GET   | `/admin/lessons`           | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤  |
| PUT   | `/admin/lessons/:id`       | –û–±–Ω–æ–≤–∏—Ç—å —É—Ä–æ–∫           |
| DELETE| `/admin/lessons/:id`       | –£–¥–∞–ª–∏—Ç—å —É—Ä–æ–∫            |

#### –í–ª–æ–∂–µ–Ω–∏—è —É—Ä–æ–∫–æ–≤

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç                          | –û–ø–∏—Å–∞–Ω–∏–µ              |
|-------|-----------------------------------|------------------------|
| POST  | `/admin/lesson-attachments`       | –°–æ–∑–¥–∞—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ       |
| GET   | `/admin/lesson-attachments`       | –ü–æ–ª—É—á–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏—è      |
| PUT   | `/admin/lesson-attachments/:id`   | –û–±–Ω–æ–≤–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ      |
| DELETE| `/admin/lesson-attachments/:id`   | –£–¥–∞–ª–∏—Ç—å –≤–ª–æ–∂–µ–Ω–∏–µ       |

#### –¢–µ—Å—Ç—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç              | –û–ø–∏—Å–∞–Ω–∏–µ               |
|-------|------------------------|-------------------------|
| POST  | `/admin/tests`         | –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç            |
| GET   | `/admin/tests`         | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤  |
| PUT   | `/admin/tests/:id`     | –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç           |
| DELETE| `/admin/tests/:id`     | –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç            |

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∫—É—Ä—Å—ã

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç                    | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|-------|------------------------------|------------------------------------|
| POST  | `/admin/user-courses`        | –ü—Ä–∏–≤—è–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –∫—É—Ä—Å—É    |
| GET   | `/admin/user-courses`        | –ü–æ–ª—É—á–∏—Ç—å —Å–≤—è–∑–∏                    |
| DELETE| `/admin/user-courses/:id`    | –£–¥–∞–ª–∏—Ç—å —Å–≤—è–∑—å                     |

---

### üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —á–∞—Å—Ç—å (`user:8080`)

> –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (`RequireAuth`)

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç                                       | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
|-------|------------------------------------------------|---------------------------------------------|
| GET   | `/user/courses`                                | –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã                   |
| GET   | `/user/courses/:course_id/lessons`             | –ü–æ–ª—É—á–∏—Ç—å —É—Ä–æ–∫–∏ –∫—É—Ä—Å–∞                       |
| GET   | `/user/lessons/:lesson_id/details`             | –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —É—Ä–æ–∫–∞                      |
| POST  | `/user/answers`                                | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–µ—Å—Ç                   |

---

### üë• –ú–µ–Ω–µ–¥–∂–µ—Ä—Å–∫–∞—è –ø–∞–Ω–µ–ª—å (`manager:8082`)

> –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ (`RequireManager`)

| –ú–µ—Ç–æ–¥  | –≠–Ω–¥–ø–æ–∏–Ω—Ç                                                      | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|--------|---------------------------------------------------------------|-----------------------------------|
| POST   | `/manager/meetings`                                           | –°–æ–∑–¥–∞—Ç—å —Å–æ–±—Ä–∞–Ω–∏–µ                  |
| GET    | `/manager/meetings/:meeting_id`                               | –ü–æ–ª—É—á–∏—Ç—å —Å–æ–±—Ä–∞–Ω–∏–µ –ø–æ ID           |
| PATCH  | `/manager/meetings/:meeting_id`                               | –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–±—Ä–∞–Ω–∏–µ                 |
| DELETE | `/manager/meetings/:meeting_id`                               | –£–¥–∞–ª–∏—Ç—å —Å–æ–±—Ä–∞–Ω–∏–µ                  |
| GET    | `/manager/meetings`                                           | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–±—Ä–∞–Ω–∏–π          |
| POST   | `/manager/meetings/users`                                     | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ–±—Ä–∞–Ω–∏–µ  |
| GET    | `/manager/meetings/users/:email`                              | –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email    |
| POST   | `/manager/meetings/leaders`                                   | –ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–µ–¥—É—â–µ–≥–æ                |
| POST   | `/manager/meetings/users/:email/finish`                       | –ó–∞–≤–µ—Ä—à–∏—Ç—å –∫—É—Ä—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è   |

---

### üßë‚Äçüè´ –õ–∏–¥–µ—Ä—Å–∫–∞—è –ø–∞–Ω–µ–ª—å (`leader:8083`)

> –¢–æ–ª—å–∫–æ –¥–ª—è –ª–∏–¥–µ—Ä–æ–≤ (`RequireLeader`)

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç                                               | –û–ø–∏—Å–∞–Ω–∏–µ                               |
|-------|--------------------------------------------------------|----------------------------------------|
| POST  | `/leader/feedback`                                     | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤                        |
| GET   | `/leader/meetings/:meeting_id`                         | –ü–æ–ª—É—á–∏—Ç—å —Å–æ–±—Ä–∞–Ω–∏–µ                      |
| GET   | `/leader/meetings-by-leader/:leader_id`                | –ü–æ–ª—É—á–∏—Ç—å —Å–æ–±—Ä–∞–Ω–∏—è –ø–æ ID –ª–∏–¥–µ—Ä–∞         |

---

### üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (`notification:8084`)

> –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç                  | –û–ø–∏—Å–∞–Ω–∏–µ                  |
|-------|---------------------------|----------------------------|
| POST  | `/api/notification`       | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ     |

---

## üß© Middleware

| Middleware        | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
|-------------------|-------------------------------------------------------|
| `RequireAuth`     | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤–∞–ª–∏–¥–Ω–æ–≥–æ JWT                      |
| `RequireAdmin`    | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞|
| `RequireManager`  | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä               |
| `RequireLeader`   | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî –ª–∏–¥–µ—Ä                  |

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker –∏ Docker Compose.

```bash
docker-compose up --build
```

---

## üîß –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```bash
curl -X POST http://localhost:80/auth/signup \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com", "password": "123456"}'
```

---



